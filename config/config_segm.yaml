data:
  prob_train: 0.7
  prob_test: 0.1
  crop_size: null
  use_views_annotations: true
  
  training_size:
  - 224
  - 224
  delimiter: null
  maxvalues: null
  use_segmentation_masks : false 
  
  root_folder: data
  suffixes:
  - .npz

  channel_list:
  - R 
  - G 
  - B 
  - NIR
  - UV

  train:
  - - train_list.txt
    - mandarins/clementine/KDC/20220808_154231_Img_20220808_154156produccionClementina
    - mandarins/clementine/KDC/20220808_154231_Img_20220808_154156produccionClementina
  - - train_list.txt    
    - mandarins/clementine/KDC/20220803_225931_CLEMENTINE_Encoder_SURFACE1
    - mandarins/clementine/KDC/20220803_225931_CLEMENTINE_Encoder_SURFACE1    
  - - train_list.txt
    - mandarins/clementine/KDC/20220804_221439_CLEMENTINE_ENCODER_Hollow
    - mandarins/clementine/KDC/20220804_221439_CLEMENTINE_ENCODER_Hollow    
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_230921_CLEMENTINE_Encoder_OilSpots
    - mandarins/clementine/KDC/20220803_230921_CLEMENTINE_Encoder_OilSpots    
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_230515_CLEMENTINE_Encoder_Creasing1
    - mandarins/clementine/KDC/20220803_230515_CLEMENTINE_Encoder_Creasing1    
  - - train_list.txt
    - mandarins/clementine/KDC/20220808_154209_Img_20220808_154156produccionClementina
    - mandarins/clementine/KDC/20220808_154209_Img_20220808_154156produccionClementina    
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_231441_CLEMENTINE_Encoder_Good
    - mandarins/clementine/KDC/20220803_231441_CLEMENTINE_Encoder_Good
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_230825_CLEMENTINE_Encoder_Geens
    - mandarins/clementine/KDC/20220803_230825_CLEMENTINE_Encoder_Geens    
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_231126_CLEMENTINE_Encoder_Scar
    - mandarins/clementine/KDC/20220803_231126_CLEMENTINE_Encoder_Scar    
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_230703_CLEMENTINE_Encoder_rot
    - mandarins/clementine/KDC/20220803_230703_CLEMENTINE_Encoder_rot    
  - - train_list.txt
    - mandarins/clementine/KDC/20220808_154219_Img_20220808_154156produccionClementina
    - mandarins/clementine/KDC/20220808_154219_Img_20220808_154156produccionClementina
  - - train_list.txt
    - mandarins/clementine/KDC/20220803_231323_CLEMENTINE_Encoder_Skin
    - mandarins/clementine/KDC/20220803_231323_CLEMENTINE_Encoder_Skin
  - - train_list.txt
    - mandarins/nardocot/manfredi
    - mandarins/nardocot/manfredi
  - - train_list.txt
    - mandarins/tango/KDC/20220804_230331_TANGO_encoder_Scar
    - mandarins/tango/KDC/20220804_230331_TANGO_encoder_Scar
  - - train_list.txt
    - mandarins/tango/KDC/20220806_185520_tango_ENCODER_MANCHAS
    - mandarins/tango/KDC/20220806_185520_tango_ENCODER_MANCHAS
  - - train_list.txt
    - mandarins/tango/KDC/20220805_180026_tangoPROD
    - mandarins/tango/KDC/20220805_180026_tangoPROD
  - - train_list.txt
    - mandarins/tango/KDC/20220805_225459_tango_ENCODER_scars
    - mandarins/tango/KDC/20220805_225459_tango_ENCODER_scars
  - - train_list.txt
    - mandarins/tango/KDC/20220804_230730_TANGO_encoder_good
    - mandarins/tango/KDC/20220804_230730_TANGO_encoder_good
  - - train_list.txt
    - mandarins/tango/KDC/20220804_230522_TANGO_encoder_SkinDamage
    - mandarins/tango/KDC/20220804_230522_TANGO_encoder_SkinDamage
  - - train_list.txt
    - mandarins/tango/KDC/20220805_172517_tango_PROD
    - mandarins/tango/KDC/20220805_172517_tango_PROD
  - - train_list.txt 
    - mandarins/tango/KDC/20220806_185859_tango_ENCODER_ROTAS
    - mandarins/tango/KDC/20220806_185859_tango_ENCODER_ROTAS
  - - train_list.txt
    - mandarins/tango/KDC/20220804_230235_TANGO_encoder_Surface
    - mandarins/tango/KDC/20220804_230235_TANGO_encoder_Surface
  - - train_list.txt
    - mandarins/tango/KDC/20220805_231606_TANGO_ENCODER_surface
    - mandarins/tango/KDC/20220805_231606_TANGO_ENCODER_surface
  - - train_list.txt
    - oranges/navel/manfredi
    - oranges/navel/manfredi
  - - train_list.txt
    - oranges/navel/KDC/20220810_021928_Encoder_Buenas
    - oranges/navel/KDC/20220810_021928_Encoder_Buenas
  - - train_list.txt
    - oranges/navel/KDC/20220810_022231_Encoder_decay
    - oranges/navel/KDC/20220810_022231_Encoder_decay
  - - train_list.txt
    - oranges/navel/KDC/20220829_214906_prod_naranja_plu
    - oranges/navel/KDC/20220829_214906_prod_naranja_plu
  - - train_list.txt
    - oranges/navel/KDC/20220829_214322_prod_naranja_plu
    - oranges/navel/KDC/20220829_214322_prod_naranja_plu
  - - train_list.txt
    - oranges/navel/KDC/20220810_022140_Encoder_oilspot
    - oranges/navel/KDC/20220810_022140_Encoder_oilspot
                 
                
  
  

  val:
  - - val_list.txt
    - mandarins/clementine/KDC/20220808_154231_Img_20220808_154156produccionClementina
    - mandarins/clementine/KDC/20220808_154231_Img_20220808_154156produccionClementina
  - - val_list.txt    
    - mandarins/clementine/KDC/20220803_225931_CLEMENTINE_Encoder_SURFACE1
    - mandarins/clementine/KDC/20220803_225931_CLEMENTINE_Encoder_SURFACE1    
  - - val_list.txt
    - mandarins/clementine/KDC/20220804_221439_CLEMENTINE_ENCODER_Hollow
    - mandarins/clementine/KDC/20220804_221439_CLEMENTINE_ENCODER_Hollow    
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_230921_CLEMENTINE_Encoder_OilSpots
    - mandarins/clementine/KDC/20220803_230921_CLEMENTINE_Encoder_OilSpots    
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_230515_CLEMENTINE_Encoder_Creasing1
    - mandarins/clementine/KDC/20220803_230515_CLEMENTINE_Encoder_Creasing1    
  - - val_list.txt
    - mandarins/clementine/KDC/20220808_154209_Img_20220808_154156produccionClementina
    - mandarins/clementine/KDC/20220808_154209_Img_20220808_154156produccionClementina    
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_231441_CLEMENTINE_Encoder_Good
    - mandarins/clementine/KDC/20220803_231441_CLEMENTINE_Encoder_Good
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_230825_CLEMENTINE_Encoder_Geens
    - mandarins/clementine/KDC/20220803_230825_CLEMENTINE_Encoder_Geens    
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_231126_CLEMENTINE_Encoder_Scar
    - mandarins/clementine/KDC/20220803_231126_CLEMENTINE_Encoder_Scar    
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_230703_CLEMENTINE_Encoder_rot
    - mandarins/clementine/KDC/20220803_230703_CLEMENTINE_Encoder_rot    
  - - val_list.txt
    - mandarins/clementine/KDC/20220808_154219_Img_20220808_154156produccionClementina
    - mandarins/clementine/KDC/20220808_154219_Img_20220808_154156produccionClementina
  - - val_list.txt
    - mandarins/clementine/KDC/20220803_231323_CLEMENTINE_Encoder_Skin
    - mandarins/clementine/KDC/20220803_231323_CLEMENTINE_Encoder_Skin
  - - val_list.txt
    - mandarins/nardocot/manfredi
    - mandarins/nardocot/manfredi
  - - val_list.txt
    - mandarins/tango/KDC/20220804_230331_TANGO_encoder_Scar
    - mandarins/tango/KDC/20220804_230331_TANGO_encoder_Scar
  - - val_list.txt
    - mandarins/tango/KDC/20220806_185520_tango_ENCODER_MANCHAS
    - mandarins/tango/KDC/20220806_185520_tango_ENCODER_MANCHAS
  - - val_list.txt
    - mandarins/tango/KDC/20220805_180026_tangoPROD
    - mandarins/tango/KDC/20220805_180026_tangoPROD
  - - val_list.txt
    - mandarins/tango/KDC/20220805_225459_tango_ENCODER_scars
    - mandarins/tango/KDC/20220805_225459_tango_ENCODER_scars
  - - val_list.txt
    - mandarins/tango/KDC/20220804_230730_TANGO_encoder_good
    - mandarins/tango/KDC/20220804_230730_TANGO_encoder_good
  - - val_list.txt
    - mandarins/tango/KDC/20220804_230522_TANGO_encoder_SkinDamage
    - mandarins/tango/KDC/20220804_230522_TANGO_encoder_SkinDamage
  - - val_list.txt
    - mandarins/tango/KDC/20220805_172517_tango_PROD
    - mandarins/tango/KDC/20220805_172517_tango_PROD
  - - val_list.txt
    - mandarins/tango/KDC/20220806_185859_tango_ENCODER_ROTAS
    - mandarins/tango/KDC/20220806_185859_tango_ENCODER_ROTAS
  - - val_list.txt
    - mandarins/tango/KDC/20220804_230235_TANGO_encoder_Surface
    - mandarins/tango/KDC/20220804_230235_TANGO_encoder_Surface
  - - val_list.txt
    - mandarins/tango/KDC/20220805_231606_TANGO_ENCODER_surface
    - mandarins/tango/KDC/20220805_231606_TANGO_ENCODER_surface
  - - val_list.txt
    - oranges/navel/manfredi
    - oranges/navel/manfredi
  - - val_list.txt
    - oranges/navel/KDC/20220810_021928_Encoder_Buenas
    - oranges/navel/KDC/20220810_021928_Encoder_Buenas
  - - val_list.txt
    - oranges/navel/KDC/20220810_022231_Encoder_decay
    - oranges/navel/KDC/20220810_022231_Encoder_decay
  - - val_list.txt
    - oranges/navel/KDC/20220829_214906_prod_naranja_plu
    - oranges/navel/KDC/20220829_214906_prod_naranja_plu
  - - val_list.txt
    - oranges/navel/KDC/20220829_214322_prod_naranja_plu
    - oranges/navel/KDC/20220829_214322_prod_naranja_plu
  - - val_list.txt
    - oranges/navel/KDC/20220810_022140_Encoder_oilspot
    - oranges/navel/KDC/20220810_022140_Encoder_oilspot        

              

model:
  defect_types:
  - cracks
  - damage_by_pliers
  - deformed_peduncle
  - green
  - hollow
  #- insect
  - light_scars
  - mechanical_damage
  - oil_spots
  - plu_stickers
  - reddish
  - rotten
  - scars
  - skin_breakdown
  - surface
  num_channels_input: 5
  model_version: 50

train:
  batch_size: 8
  epochs: 60
  in_memory: true
  initial_model: null 
  label_smoothing: 0.00
  learning_rate: 0.03
  optimizer: sgd
  gamma_param: 0.1
  num_workers: 0
  output:
    model_file: s90_segmentacion.pkl
    path: out_models
  p_dropout: 0.4
  unfreeze_epoch: 30
  warmup: 3
  weights_decay: 0.01
  wandb_project: WANDB_DVC_S90_segmentation 
  logname: s90_segmentacion
  log_cimg: null
  # focal_loss_gamma: 2
  # focal_loss_alpha: 0.7 # Para la clase positiva

  # 224x224=50k
  min_defect_area:
  - 1000 # cracks
  - 500 # dam_by_pliers
  - 500 #def_peduncle
  - 1000 # green
  - 2000 # hollow
  - 500 # light_scars
  - 500 # mechanical_damage
  - 500 # oil_spots
  - 500 # plu_stickers
  - 7000 # reddish
  - 1000 # rotten
  - 500 # scars
  - 300 # skin_breakdown
  - 7000 # surface
  constrain_weight: 5.0
  min_negative_fraction: 
  - 0.80 # cracks
  - 0.95 # dam_by_pliers
  - 0.90 #def_peduncle
  - 0.02 # green
  - 0.60 # hollow
  - 0.80 # light_scars    
  - 0.95 # mechanical_damage
  - 0.95 # oil_spots
  - 0.95 # plu_stickers
  - 0.02 # reddish
  - 0.50 # rotten
  - 0.80 # scars 
  - 0.95 # skin_breakdown
  - 0.15 #surface

  

  bottom_constrain_weight: 1.0
  binmask_weight: 30.0 
  class_weights: 
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  - 1.0    

  augmentation:
    random_rotation: 30
    brightness: 
    - 0.8
    - 1.3
    contrast:
    - 0.8
    - 1.3
    hue: 0.01
    saturation: 0.15
    blur:
    - 0.1
    - 1.5
    affine:
      scale:
      - 0.8
      - 1.1
      shear: 15
      translate: 
      - 0.0
      - 0.0
      degrees: 20

evaluate:
  model_dir: out_models
  model_file: s90_segmentacion.pkl
  
  report_dir: out_segment
  train_predictions: train_scores.json
  val_predictions: val_scores.json
  test_predictions: test_scores.json  
  aucs: aucs.json


predict:
  model_dir: out_models
  model_file: s90_segmentacion.pkl
  defectos:
  - green
  - deformed_peduncle
  - oil_spots
  #report_dir: out_predict
    